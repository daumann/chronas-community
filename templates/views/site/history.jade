extends ../../layouts/default

block intro
    link(href='/package/unitegallery/css/unite-gallery.css', rel='stylesheet', type='text/css')
    link(rel='stylesheet', href='package/bootstrapSub.css')
    link(rel='stylesheet', href='package/toggle/bootstrap-toggle.min.css')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css')
    style.
        .modal-backdrop.in {
            opacity: 0.7;
        }

block content
    .page-content#mobileAlert(style="display: none")
        .section.highlight: .container
            h5 Sorry, there is no mobile version yet!
            p Our Chronas application in its first release does not support mobile devices. This feature is on the road map though - check back later or use our application on a desktop!
    .page-content#iEAlert(style="display: none")
        .section.highlight: .container
            h5 Sorry, there is no support for your browser Internet Explorer!
            p Our Chronas application in its first release does not support IE. Please use Google Chrome (recommended) or Modzilla Firefox.
    #infoModal.modal.fade(role="dialog", style="overflow: hidden;")
        .modal-dialog#modalBody(style="width: 50%;")
            // Modal content
            .modal-content(style="padding: 0px;")
                .modal-header(style="padding: 9px 15px; border-bottom: 1px solid #eee; background: #f7f7f7; ")
                    button.close(type="button", data-dismiss="modal", onclick="$('#tutFrame').attr('src', ''); $('#tutFrame').attr('src', 'https://www.youtube.com/embed/0yqcCK66Az4?vq=hd1080');", aria-hidden="true") x
                    h7(style="font-size: larger; font-weight: 500;")#infoHeadline How to use the Chronas History Application
                .modal-body
                    .datapointTitle(style=" color: #333; text-align: center ")
                        iframe#tutFrame(width="100%", src="https://www.youtube.com/embed/0yqcCK66Az4?vq=hd1080", frameborder="0", allowfullscreen="")
                .modal-footer(style="background: #f7f7f7;")
                    button.btn.btn-primary(data-dismiss="modal", onclick="$('#tutFrame').attr('src', ''); $('#tutFrame').attr('src', 'https://www.youtube.com/embed/0yqcCK66Az4?vq=hd1080');", aria-hidden="true") Close



    div#bottomBar(style='position: absolute;width: 10px;height: calc(4% - 43px);left: calc(50% - 5px);background-color: rgb(51, 51, 51);z-index: 99;bottom: 0px;')
    div#topBar(style='position: absolute;width: 10px;height: calc(4% - 43px);left: calc(50% - 5px);background-color: rgb(51, 51, 51);z-index: 99;')
    div#iframeDiv(style=' min-height: 100%;     height:100%;     width:100%;    position:absolute;    overflow:hidden;')
        iframe#chronasWindow(onload="if(beginLoad !== undefined) { if (document.getElementById('chronasWindow').src !== '' && document.getElementById('chronasWindow').src !== 'http://app.chronas.org') {console.log('app loaded:', $('#chronasWindow').attr('src'));incrementLoaded = 22; fillBars(); var selectedYear = $('#selectedYear').val(); document.getElementById('loadergif').style.display='none';  document.getElementById('enterNow').style.display='block'; } }", src='', style='display: none; border: 0; width: 100%; height: 100%') Please update your Browser.
        #demo-content
            #loader-wrapper
                #loader
                    div(style='\
                    position: absolute;\
                    width: 8px;\
                    height: 200px;\
                    left: 46px;\
                    background-color: rgb(247, 247, 247);\
                    ')
                    #loadergif
                    form(method='post')
                        input#tsi(type='hidden', name='tsi', value='-1')
                        input#tsgo(type='hidden', name='action', value='tsgo')
                        #tssu(type='submit', name='action', onClick="this.parentNode.submit();", value='tsgo', style="display: none")
                        button#enterNow(style='display: none', type='button', onclick='frameload(); $("#clickAngle").click();', value='enter-history')
                            span.enterText(data-toggle='tooltip', data-placement='top', title='') ENTER
                .loader-section.section-left
                    .levelSelection(style="text-align: left;overflow: auto;direction: rtl;")
                        .lSwrap
                            .page-intro(style="padding-left: 15px; padding-bottom: initial; text-align: left; width: initial;")
                                h5 How did the world look like when...
                            .page-content
                                .section.highlight
                                    .container
                                        .col-sm-2
                                            //i.fa.fa-arrow-down.fa-2x.selectTopic.animated.bounce
                                            #yearImgs
                                                p
                                                    img.activeImg(class='singImg',  src='/articleImages/selected/9-Rome.jpg', value='9: Roman legions were fatally ambushed|"Quintilius Varus, give me back my legions!"|In the Teutoburg Forest an alliance of Germanic tribes ambushed and decisively destroyed three Roman legions and their auxiliaries, led by Publius Quinctilius Varus. Despite several successful campaigns and raids by the Roman army in the years after the battle, they never again attempted to conquer Germanic territory east of the Rhine River. Modern historians have regarded Arminius\' victory as Rome\'s greatest defeat and one of the most decisive battles in history.', data-value='9|Rome|41.743/12.722')
                                                    p
                                                    img(class='singImg',  src='/articleImages/selected/30-Jesus.jpg', value='30: Jesus of Nazareth was crucified|"Love your enemies and pray for those who persecute you."|Most scholars agree that Jesus was a Galilean Jew and that his crucifixion was between 30 and 33 CE by the order of the Roman Prefect Pontius Pilate. Jesus preached in Roman occupied Judea and Galilee in the tradition of the old testament and through his pacifistic teachings started what would become the world\'s largest religion.', data-value='30|Jerusalem|41.743/12.722')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/632-mhmd.jpg', value='632: Mohammed unified Arabia|"The strong man is not the good wrestler; the strong man is only the one who controls himself when he is angry."|Mohammed and a few early followers migrated to Medina from Mecca in the year 622 marking the beginning of the Islamic calendar. In Medina, Muhammad united the tribes and after eight years gathered an army of 10,000 Muslim converts and conquered the city of Mecca. His efforts would unify Arabia into a single religious polity under Islam.', data-value='632|Mecca|26.032/37.925')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/774_Charlemagne.jpg', value='774: Charlemagne united West-Europe|"Right action is better than knowledge; but in order to do what is right, we must know what is right."|Called the "Father of Europe", Charlemagne united most of Western Europe for the first time since the Western Roman Empire three centuries earlier. His great scholarly failure, as Einhard relates, was his inability to write: when in his old age he began attempts to learn—practicing the formation of letters in his bed during his free time on books and wax tablets he hid under his pillow. ', data-value='774|Aachen|50.321/6.888')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/999-Vikings.jpg', value='999: Vikings arrived in North-America|"Never walk away from home ahead of your axe and sword. You can\'t feel a battle in your bones or foresee a fight."|Scandinavian Norsemen explored Europe by its seas and rivers for trade, raids and conquest. In this period, the Norsemen also settled in Norse Greenland and Newfoundland. Though Viking travellers and colonists were seen at many points in history as brutal raiders, many historical documents suggest that their invasion of other countries was retaliation in response to the encroachment upon tribal lands by Christian missionaries, and perhaps by the Saxon Wars prosecuted by Charlemagne and his kin to the south.', data-value='999|Scandinavia|59.105/10.931')
                                                    p
                                                    img(class='singImg',  src='/articleImages/selected/1223-Mongols.jpg', value='1248: Mongols invaded East-Europe|"Conquering the world on horseback is easy; it is dismounting and governing that is hard."|Genghis Khan was the founder and Great Khan of the Mongol Empire, which became the largest contiguous empire in history after his demise. He came to power by uniting many of the nomadic tribes of Northeast Asia. Known for the brutality of his campaigns, Genghis Khan is also credited with bringing the Silk Road under one cohesive political environment. This increased communication and trade from Northeast Asia to Muslim Southwest Asia and Christian Europe, thus expanding the horizons of all three cultural areas.', data-value='1248|Poland|36.42/84.99')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/1271-YuanByKublai.jpg', value='1271: Kublai Khan founded Yuan Dynasty|"Why do you speak to me of the stones? It is only the arch that matters to me."|Kublai established the Yuan dynasty, which ruled over present-day Mongolia, China, Korea, and some adjacent areas, and assumed the role of Emperor of China. By 1279, the Yuan forces had overcome the last resistance of the Southern Song dynasty, and Kublai became the first non-Han Emperor to conquer all of China.', data-value='1271|Beijing|40.263/113.159')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/1402-Timur.jpg', value='1402: Timur ruled the Muslim world|"As there is but one god in heaven, so should there be but one ruler on earth."|Timur is considered the last of the great nomadic conquerors of the Eurasian Steppe, he emerged as the most powerful ruler in the Muslim world after defeating the Mamluks of Egypt and Syria, the emerging Ottoman Empire and the declining Delhi Sultanate. As a means of legitimating his conquests, Timur relied on Islamic symbols and language, referring to himself as the "Sword of Islam" and patronizing educational and religious institutions. He converted nearly all the Borjigin leaders to Islam during his lifetime.', data-value='1402|Baghdad|39.682/59.832')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/1532-Pizarro-peru.jpg', value='1532: Pizarro conquered the Inca Empire|"The conquest of Peru began with a checkmate."|The last Sapa Inca Atahualpa decided that the 168 Spaniards were not a threat to him and his 80,000 troops, so he sent word inviting to meet Pizarro, expecting to capture them. Pizarro and his men thus advanced unopposed through some very difficult terrain. By means of an ambush, Pizarro captured Atahualpa and used him to control and conquer the Inca Empire, the largest empire in pre-Columbian America.', data-value='1532|Peru|-17.151/-70.928')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/1776-Washington in Delaware.jpg', value='1776: Washington crossed the Delaware|"To be prepared for war is one of the most effectual means of preserving peace."| In December 1776 during the American Revolutionary War George Washington crossed the icy Delaware in a surprise attack which would inflict a crucial defeat to the opposing Hessian forces. He became the first President of the United States and was called the "father of his country". His retirement from office after two terms established a tradition which was unbroken until 1940.', data-value='1776|Delaware|37.536/-79.167')
                                                p
                                                    img(class='singImg',  src='/articleImages/selected/1812-Napoleons.jpg', value='1812: Napoleon returned from Moscow|"The most terrible of all my battles was the one before Moscow. The French showed themselves to be worthy of victory, but the Russians showed themselves worthy of being invincible."|Napoléon Bonaparte gained rose to prominence during the French Revolution and gained control of most continental Europe as a military leader. His campaigns are studied at military schools worldwide and he remains one of the most celebrated and controversial political figures in Western history. His defeat and retreat through the Russian winter marked the turning point and demise of the First French Empire.', data-value='1812|Moscow|48.115/5.603')
                                        .col-sm-10
                                            h2#yearTitle 52 BC: Caesar conquered Gaul
                                            blockquote#yearQuote "If you must break the law, do it to seize power: in all other cases observe it."
                                            p#yearDesc In the Battle of Alesia (September, 52 BC), Caesar built a fortification around the city to besiege it. However, Caesar's army was surrounded by the rest of Gaul, and Vercingetorix had summoned his Gallic allies to attack the besieging Romans, so Caesar built another outer fortification against the expected relief armies (resulting in a doughnut-shaped fortification).
                                            p
                                                img(class='prevHistImg',  src='/articleImages/selected/1-52BC.jpg')
                                .section: .container-sm


                .loader-section.section-right
                    .helpSelection
                        .lSwrap
                            .page-intro(style="padding-left: 15px; padding-bottom: 0em;; text-align: left; width: initial;")
                                h5 PRESETTINGS
                            .page-content#previewSection
                                .section.highlight(style="padding-top: 0px")
                                    div(data-toggle='tooltip', data-placement='left', title='(Important) Info about how to use this application', style='float: right;')
                                        i#infoModalB(data-toggle="modal", onclick="$('#tutFrame').attr('src', ''); $('#tutFrame').attr('src', 'https://www.youtube.com/embed/0yqcCK66Az4?autoplay=1&vq=hd1080');", data-target="#infoModal", style="cursor: pointer; background: url(\"/images/infoS.png\") repeat; height: 113px; background-size: 100%; width: 113px; right: 0px; top: 0px; position: absolute;")

                                    .section#prevSection: .container-sm(style=" margin-top: 0px; width:100%;")

                                            table(style="width: 100%;")
                                                tr
                                                    td(style="padding-left: 50px;")
                                                        label.radio-inline
                                                            input(type='radio', id="radio_fullscreen", name='optradio')
                                                            | Fullscreen
                                                        label.radio-inline
                                                            input(type='radio', name='optradio', checked)
                                                            | Embed Mode

                                                        h5#syearTitle(style="font-weight: 200;margin-left: -30px;") Starting Year
                                                            | *
                                                        input(type='number', min="0", max="2000", name='year' value=400, style='border: 0px; box-shadow: none; font-size: 22px;').form-control#selectedYear

                                                        h5#markerTitle(style="font-weight: 200;margin-left: -30px;") Markers
                                                            | *
                                                        table
                                                            tr
                                                                td(width="200px")
                                                                    .squaredOne
                                                                        input#milBox(type='checkbox', value='None', name='check')
                                                                        label#milBoxA(for='milBox', style='background-color: rgb(137, 155, 55);')
                                                                    label.labelTitles Military
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerMil.png')
                                                                td(valign='baseline')
                                                                    .squaredOne
                                                                        input#citiesBox(type='checkbox', value='None', name='check')
                                                                        label#citiesBoxA(for='citiesBox', style='background-color: rgb(46, 130, 130);')

                                                                    label.labelTitles Cities
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/cityMarker.png')
                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#expBox(type='checkbox', value='None', name='check')
                                                                        label#expBoxA(for='expBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Explorers
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerExp.png')
                                                                td
                                                                    .squaredOne
                                                                        input#castlesBox(type='checkbox', value='None', name='check')
                                                                        label.labelTitles#castlesBoxA(for='castlesBox', style='background-color: rgb(46, 130, 130);')
                                                                    label.labelTitles Castles
                                                                    img(style='-webkit-user-select: none;', src='http://chronas.org/static/staticReqs/customIcons/castleMarker.png')

                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#polBox(type='checkbox', value='None', name='check')
                                                                        label#polBoxA(for='polBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Politicians
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerPol.png')
                                                                td
                                                                    .squaredOne
                                                                        input#battBox(type='checkbox', value='None', name='check')
                                                                        label#battBoxA(for='battBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Battles
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/battleMarker.png')
                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#sciBox(type='checkbox', value='None', name='check')
                                                                        label#sciBoxA(for='sciBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Scientists
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerSci.png')
                                                                td
                                                                    .squaredOne
                                                                        input#siegeBox(type='checkbox', value='None', name='check')
                                                                        label#siegeBoxA(for='siegeBox', style='background-color: rgb(137, 155, 55);')
                                                                    label.labelTitles Sieges
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/siegeMarker.png')
                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#artBox(type='checkbox', value='None', name='check')
                                                                        label#artBoxA(for='artBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Artists
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerArt.png')
                                                                td
                                                                    .squaredOne
                                                                        input#arteBox(type='checkbox', value='None', name='check')
                                                                        label#arteBoxA(for='arteBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Artefacts
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/artMarker.png')
                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#relBox(type='checkbox', value='None', name='check')
                                                                        label#relBoxA(for='relBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Religious
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerR-C.png')
                                                                td
                                                                    .squaredOne
                                                                        input#unkAreaBox(type='checkbox', value='None', name='check')
                                                                        label#unkAreaBoxA(for='unkAreaBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Area Info
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/otherMarkerArea.png')
                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#athBox(type='checkbox', value='None', name='check')
                                                                        label#athBoxA(for='athBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Athletes
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerAth.png')
                                                                td
                                                                    .squaredOne
                                                                        input#unkBox(type='checkbox', value='None', name='check')
                                                                        label#unkBoxA(for='unkBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Unknown
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/otherMarkerUnc.png')
                                                            tr
                                                                td
                                                                    .squaredOne
                                                                        input#uncBox(type='checkbox', value='None', name='check')
                                                                        label#uncBoxA(for='uncBox', style='background-color: rgb(137, 155, 55);')

                                                                    label.labelTitles Unclassified
                                                                    img(style='-webkit-user-select: none', src='http://chronas.org/static/staticReqs/customIcons/personMarkerOth.png')


                                                        h5#areaTitle(style="font-weight: 200; margin-left: -30px;") Area
                                                            | *
                                                        label.radio-inline
                                                            input(type='radio', name='arearadio', id="rulA", checked)
                                                            | Ruler
                                                        label.radio-inline
                                                            input(type='radio', name='arearadio', id="relA")
                                                            | Religion
                                                        label.radio-inline
                                                            input(type='radio', name='arearadio', id="mrelA")
                                                            | Main Religion
                                                        label.radio-inline
                                                            input(type='radio', name='arearadio', id="culA")
                                                            | Culture
                                                        label.radio-inline
                                                            input(type='radio', name='arearadio', id="popA")
                                                            | Population
                                                    td.hideIfThin
                                                        img#prevImage(class='prevImg', src='/images/mapImages9.jpg')
                                                        h5(style="text-align: center; font-weight: 300; margin-top: .66em; margin-bottom: 0; ") PREVIEW


                                            span(style=" margin-top: 10px !important; margin-left: 20px !important; position: absolute; font-size: 0.9em; font-style: italic; ") (*) can also be changed inside the app
                                            hr.mv-2(style="clear:both;")
                                            p
                                                h5(style="text-align: center; font-weight: 300;") README
                                                ul(style="text-align: left;")
                                                    li If you are here the first time, make sure to watch the <span onclick="$('#infoModalB').click();" style="cursor: pointer; text-decoration: underline;">short intro video</span> presenting the basic features
                                                    li Note that the data used in this app is yet inconsistent and will be editable by the community in the final release
                                                    li This is a computation heavy application and for some systems longer loading times are expected
                                                    li#browserHint(style="color: red; display: none;")
                                                    li#resolutionHint(style="color: red; display: none;")
                                                    li#mobileHint(style="color: red; display: none;")

            #content



block js
    script(src='/package/unitegallery/js/jquery-11.0.min.js')
    script(src='http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js')
    script(src='/package/toggle/bootstrap-toggle.min.js')
    script(src='/package/unitegallery/js/unitegallery.js')
    script(src='/package/unitegallery/themes/grid/ug-theme-grid.js')

    script.
        incrementLoaded = 6;
        function mobilecheck() {
            var check = false;
            (function (a) {
                if (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)))check = true
            })(navigator.userAgent || navigator.vendor || window.opera);
            return check;
        }

        var startTime = -1;
        var endTime = -1;
        window.jQuery || document.write('<script src="js/vendor/jquery-1.9.1.min.js"><\\/script>')
        function showNav() {
            document.getElementById("header").style.display = "block";
        };
        function hideNav() {
            if (!window.ev) {
                document.getElementById("header").style.display = "none";
            }
        };
        cooldown = false;
        document.getElementById("header").style.borderBottom = "4px solid #f7f7f7";
        document.getElementById("header").style.height = "50px";
        function frameload() {

            if ($("#radio_fullscreen").is(':checked')){
                toggleFullScreen();
            }


            $("#header").append('<div style=" text-align: center; pointer-events: none; "><i id="clickAngle" class="fa fa-angle-down" style=" margin: 0 auto; cursor: pointer; opacity: 0.6;pointer-events: all; font-size: 30px; "></i></div>')

            t1();
            $("#demo-content").css("pointer-events", "none")
            startTime = new Date().getTime();

            document.getElementById("chronasWindow").style.display = "block";
            document.getElementsByClassName("site-footer")[0].style.display = 'none';
            document.getElementsByClassName("site-body")[0].style.position = 'initial';
            document.getElementsByClassName("site-body")[0].style.padding = 'initial';
            document.getElementsByClassName("site-body")[0].style.zIndex = 'initial';
            document.getElementsByClassName("site-body")[0].style.height = '15px';
            document.getElementById("demo-content").style.top = "0px";
            document.getElementById("demo-content").style.position = "absolute";
            document.getElementById("demo-content").style.width = "100%";
            document.getElementById("demo-content").style.height = "1%";

            document.getElementById("header").style.position = "absolute";
            document.getElementById("header").style.top = "0px";
            document.getElementById("header").style.borderBottom = "0px solid #f7f7f7";
            document.getElementById("header").style.height = "46px";
            document.getElementById("header").style.width = "100%";
            $('#content').css('paddingBottom', '11px');
            $('#clickAngle').click(function () {
                if ($('#header').css("top") !== "0px") {
                    $('#header').css("top", "0px")
                    $('#demo-content').hide();
                    $('#clickAngle').removeClass('fa-angle-down')
                    $('#clickAngle').removeClass('fa-angle-up')
                    $('#clickAngle').addClass('fa-angle-up')
                }
                else {
                    $('#header').css("top", "-65px")
                    $('#clickAngle').removeClass('fa-angle-up')
                    $('#clickAngle').removeClass('fa-angle-down')
                    $('#clickAngle').addClass('fa-angle-down')
                }
            });

            $('#header').mouseenter(function () {
                window.ev = true;
            });

            $('#header').mouseleave(function () {
                window.ev = false;

                $('#demo-content').show();
                setTimeout(function () {
                    cooldown = false;
                }, 100);
            });

            $('body').addClass('loaded');
            $('h1').css('color', '#222222');

            $('#bottomBar').hide();
            $('#topBar').hide();


            var nY = parseInt($("#selectedYear").val());


            if ($("#milBox").is(':checked')){
                if (!$('#chronasWindow').contents().find("#milBox").is(':checked'))
                    $('#chronasWindow').contents().find("#milBox").click();
            
                if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                    $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                } else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#milBox").is(':checked'))
                        $('#chronasWindow').contents().find("#milBox").click();
                }
            
                if ($("#citiesBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#citiesBox").is(':checked'))
                        $('#chronasWindow').contents().find("#citiesBox").click();
                    if ($('#chronasWindow').contents().find("#cityChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#cityChecked").parent().click()
                }
                else if (
                $("#citiesBox").is(':checked') ||
                $("#castlesBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#citiesBox").is(':checked'))
                        $('#chronasWindow').contents().find("#citiesBox").click();
                }
            
                if ($("#expBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#expBox").is(':checked'))
                        $('#chronasWindow').contents().find("#expBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#expBox").is(':checked'))
                        $('#chronasWindow').contents().find("#expBox").click();
                }
            
                if ($("#castlesBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#castlesBox").is(':checked'))
                        $('#chronasWindow').contents().find("#castlesBox").click();
                    if ($('#chronasWindow').contents().find("#cityChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#cityChecked").parent().click()
                }
                else if (
                $("#citiesBox").is(':checked') ||
                $("#castlesBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#castlesBox").is(':checked'))
                        $('#chronasWindow').contents().find("#castlesBox").click();
                }
            
                if ($("#polBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#polBox").is(':checked'))
                        $('#chronasWindow').contents().find("#polBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#polBox").is(':checked'))
                        $('#chronasWindow').contents().find("#polBox").click();
                }
            
                if ($("#battBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#eventsChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#eventsChecked").parent().click()
                }
                if ($("#sciBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#sciBox").is(':checked'))
                        $('#chronasWindow').contents().find("#sciBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#sciBox").is(':checked'))
                        $('#chronasWindow').contents().find("#sciBox").click();
                }
            
                if ($("#siegeBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#eventsChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#eventsChecked").parent().click()
                }
                if ($("#artBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#artBox").is(':checked'))
                        $('#chronasWindow').contents().find("#artBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#artBox").is(':checked'))
                        $('#chronasWindow').contents().find("#artBox").click();
                }
            
                if ($("#arteBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#artChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#artChecked").parent().click()
                }
                if ($("#relBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#relBox").is(':checked'))
                        $('#chronasWindow').contents().find("#relBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#relBox").is(':checked'))
                        $('#chronasWindow').contents().find("#relBox").click();
                }
            
                if ($("#unkAreaBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#unkAreaBox").is(':checked'))
                        $('#chronasWindow').contents().find("#unkAreaBox").click();
                    if ($('#chronasWindow').contents().find("#otherChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#otherChecked").parent().click()
                }
                else if (
                $("#unkAreaBox").is(':checked') ||
                $("#unkBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#unkAreaBox").is(':checked'))
                        $('#chronasWindow').contents().find("#unkAreaBox").click();
                }
            
                if ($("#athBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#athBox").is(':checked'))
                        $('#chronasWindow').contents().find("#athBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#athBox").is(':checked'))
                        $('#chronasWindow').contents().find("#athBox").click();
                }
            
                if ($("#unkBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#unclassifiedBox").is(':checked'))
                        $('#chronasWindow').contents().find("#unclassifiedBox").click();
                    if ($('#chronasWindow').contents().find("#otherChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#otherChecked").parent().click()
                }
                else if (
                $("#unkAreaBox").is(':checked') ||
                $("#unkBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#unclassifiedBox").is(':checked'))
                        $('#chronasWindow').contents().find("#unclassifiedBox").click();
                }
            
                if ($("#uncBox").is(':checked')) {
                    if (!$('#chronasWindow').contents().find("#uncBox").is(':checked'))
                        $('#chronasWindow').contents().find("#uncBox").click();
                    if ($('#chronasWindow').contents().find("#peopleChecked").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#peopleChecked").parent().click()
                }
                else if (
                $("#milBox").is(':checked') ||
                $("#expBox").is(':checked') ||
                $("#polBox").is(':checked') ||
                $("#sciBox").is(':checked') ||
                $("#artBox").is(':checked') ||
                $("#relBox").is(':checked') ||
                $("#athBox").is(':checked') ||
                $("#uncBox").is(':checked')) {
                    if ($('#chronasWindow').contents().find("#uncBox").is(':checked'))
                        $('#chronasWindow').contents().find("#uncBox").click();
                }
            
            
            
            
            
            
                if ($("#rulA").is(':checked')) {
            
                    if ($('#chronasWindow').contents().find("#A-Ruler").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#A-Ruler").parent().click()
                }
                if ($("#relA").is(':checked')) {
            
                    if ($('#chronasWindow').contents().find("#A-Religion").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#A-Religion").parent().click()
                }
                if ($("#mrelA").is(':checked')) {
            
                    if ($('#chronasWindow').contents().find("#A-MainRel").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#A-MainRel").parent().click()
                }
                if ($("#culA").is(':checked')) {
            
                    if ($('#chronasWindow').contents().find("#A-Culture").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#A-Culture").parent().click()
                }
                if ($("#popA").is(':checked')) {
            
                    if ($('#chronasWindow').contents().find("#A-Population").parent().hasClass("off"))
                        $('#chronasWindow').contents().find("#A-Population").parent().click()
                }
        
            setTimeout(function () {
                document.getElementById("chronasWindow").contentWindow.timeline2.setCustomTime(new Date().setFullYear(nY));
                document.getElementById("chronasWindow").contentWindow.playback.setCursor(new Date().setFullYear(nY))
                
            }, 500);
        }

        function t1() {
            endTime = new Date().getTime();
            console.debug("!x!tt");
            $.get("/api/addTs")
            console.debug("!x!tt  " + "/api/addingTs/" + parseInt(endTime - startTime).toString());
            setTimeout(function () {
                t1();
            }, 60000);

        };

        var beginLoad = undefined;

        function runBars() {
            var loaded = 3;
            var load = function () {
                loaded += incrementLoaded;
                $("#bottomBar").css("height", "calc(" + (Math.sqrt(Math.sqrt(loaded)) * 5) + "% - 43px)")
                $("#topBar").css("height", "calc(" + (Math.sqrt(Math.sqrt(loaded)) * 5) + "% - 43px)")

                if ((Math.sqrt(Math.sqrt(loaded)) * 5) > 50) {
                    clearInterval(beginLoad);
                }
            };
            beginLoad = setInterval(function () {
                load();
            }, 40);
        }

        function resetBars() {
            clearInterval(beginLoad);
            $("#bottomBar").css("height", "calc(3% - 43px)")
            $("#topBar").css("height", "calc(3% - 43px)")

        }

        function fillBars() {
            clearInterval(beginLoad);
            $("#bottomBar").css("height", "calc(50% - 43px)")
            $("#topBar").css("height", "calc(50% - 43px)")
        }

        jQuery(document).ready(function () {
            $('label.tree-toggler').click(function () {

                $(this).parent().children('ul.tree').toggle(300);

            });

            if (mobilecheck()) {
                $("#mobileHint").css("display", "");
                $("#mobileHint").html("<b>No mobile support at this stage</b>");

                $("#topBar").hide();
                $("#bottomBar").hide();
                $('#iframeDiv').hide();
                $('#mobileAlert').show();
            }
            else {


                var detectedBrowser = "";
                if (!!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) {
                    detectedBrowser = "Opera";
                    $("#browserHint").html("Be advised that <b>" + detectedBrowser + "</b> is currently <b>NOT</b> a " +
                            "supported browser.<span style='color: initial'> This application is optimized for Google Chrome.</span>");
                }
                if (typeof InstallTrigger !== 'undefined') {
                    $("#browserHint").css("color", "rgb(165, 102, 0)");
                    $("#browserHint").html("<span style='color: initial'> This application is optimized for Google Chrome.</span> However, your <b>" + detectedBrowser + "</b> browser should also be able to run this application.");

                }
                if (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) {
                    detectedBrowser = "Safari";
                    $("#browserHint").css("color", "rgb(165, 102, 0)");
                    $("#browserHint").html("<span style='color: initial'> This application is optimized for Google Chrome.</span> However, your <b>" + detectedBrowser + "</b> browser should also be able to run this application.");

                }
                if (!!window.chrome && !(!!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0)) {
                    detectedBrowser = "Chrome";
                    //$("#browserHint").css("color","rgb(165, 102, 0)");
                    //$("#browserHint").html("<span style='color: initial'> This application is optimized for Google Chrome.</span> However, your <b>" + detectedBrowser + "</b> browser should also be able to run this application.");

                }

                if ($("#browserHint").html() !== "") $("#browserHint").css("display", "")

                var screenWidth = $(window).width() // 1085
                var screenHeight = $(window).height() // 785

                $("#tutFrame").css("height", parseInt(screenHeight / 1.4))

                if (parseInt(parseInt(screenHeight / 1.4) * 1.77777777778) + 30 < screenWidth) {
                    $("#tutFrame").css("width", parseInt(parseInt(screenHeight / 1.4) * 1.77777777778))
                    $("#modalBody").css("width", parseInt(parseInt(screenHeight / 1.4) * 1.77777777778) + 30)
                }

                if (screenWidth < 1085 || screenHeight < 785) {
                    $("#resolutionHint").css("display", "");
                    $("#resolutionHint").html("Your current resolution of <b>" + screenWidth + " x " + screenHeight + "</b> is below the recommended minimum of <b>1085 x 785</b>");
                }


                $('[data-toggle="tooltip"]').tooltip();

                $("body").prepend('<div id="bottomBar" style="position: absolute; width: 10px; left: calc(50% - 5px); z-index: 99; bottom: 0px; height: calc(0% - 43px); background-color: rgb(51, 51, 51);"></div><div id="topBar" style="position: absolute; width: 10px; left: calc(50% - 5px); z-index: 99; height: calc(0% - 43px); background-color: rgb(51, 51, 51);"></div>');

                if (!!document.documentMode) {
                    detectedBrowser = "Internet Explorer";
                    $("#mobileHint").css("display", "");
                    $("#mobileHint").html("<b>No support for Internet Explorer at this stage.</b> Please try Google Chrome or Firefox.");

                    $("#topBar").hide();
                    $("#bottomBar").hide();
                    $('#iframeDiv').hide();
                    $('#iEAlert').show();


                }

                $("body").prepend($("#infoModal"));
                jQuery("#gallery").unitegallery({
                    gallery_theme: "grid",
                    theme_panel_position: "left",
                    thumb_image_overlay_effect: true,
                    thumb_image_overlay_type: "sepia"
                });

                $(".singImg").mouseenter(function () {
                    $(".prevHistImg").removeClass("prevHistImgActive");
                    $(".prevHistImg").attr("src", this.src);
                    $(".prevHistImg").addClass("prevHistImgActive");
                    $("#yearTitle").html($(this).attr("value").split("|")[0]);
                    $("#yearQuote").html($(this).attr("value").split("|")[1]);
                    $("#yearDesc").html($(this).attr("value").split("|")[2]);
                });

                $(".singImg").mouseleave(function () {
                    $(".prevHistImg").removeClass("prevHistImgActive");
                    $(".prevHistImg").attr("src", currSrc);
                    $(".prevHistImg").addClass("prevHistImgActive");
                    $("#yearTitle").html(currentTitle);
                    $("#yearQuote").html(currQuote);
                    $("#yearDesc").html(currDesc);
                });

                /*
                $("#selectedYear").change(function () {
                    $("#chronasWindow").attr('src', '')

                    setTimeout(function () {
                        document.getElementById('loadergif').style.display = 'block';
                        document.getElementById('enterNow').style.display = 'none';
                        $("#chronasWindow").attr('src', '/en/app/map/vas_6#4/35.35/32.17?year=' + $("#selectedYear").val());
                        $("#prevSection").removeClass("previewSectionActive")
                    }, 300);

                });
                */
                $(".singImg").click(function () {

                    $("#prevSection").addClass("previewSectionActive")
                    document.getElementById('loadergif').style.display = 'block';
                    document.getElementById('enterNow').style.display = 'none';

                    currentTitle = $("#yearTitle").html();
                    currSrc = this.src;
                    currQuote = $("#yearQuote").html();
                    currDesc = $("#yearDesc").html();
                    $(".singImg").removeClass("activeImg");
                    $(this).addClass("activeImg");

                    $("#selectedYear").val($(this).attr("data-value").split("|")[0])
                    $("#selectedLocation").val($(this).attr("data-value").split("|")[1])
                    var tmpLoc = $(this).attr("data-value").split("|")[2];
                    $("#prevImage").attr('src', '/images/mapImages' + $(this).attr("data-value").split("|")[0] + '.jpg');
                    
                    $("#chronasWindow").attr('src', '')

                    setTimeout(function () {
                        if (beginLoad !== undefined) resetBars();
                        else incrementLoaded = 6;

                        document.getElementById('loadergif').style.display = 'block';
                        document.getElementById('enterNow').style.display = 'none';
                        $("#chronasWindow").attr('src', '/en/app/map/vas_6#4/' + tmpLoc + '?year=' + $("#selectedYear").val());
                        $("#prevSection").removeClass("previewSectionActive")
                        runBars();
                    }, 300);
                    


                });

                $($(".singImg")[0]).mouseenter();
                $($(".singImg")[0]).click();

            }
        });

        function toggleFullScreen() {
          if ((document.fullScreenElement && document.fullScreenElement !== null) ||    
           (!document.mozFullScreen && !document.webkitIsFullScreen)) {
            if (document.documentElement.requestFullScreen) {  
              document.documentElement.requestFullScreen();  
            } else if (document.documentElement.mozRequestFullScreen) {  
              document.documentElement.mozRequestFullScreen();  
            } else if (document.documentElement.webkitRequestFullScreen) {  
              document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
            }  
          } else {  
            if (document.cancelFullScreen) {  
              document.cancelFullScreen();  
            } else if (document.mozCancelFullScreen) {  
              document.mozCancelFullScreen();  
            } else if (document.webkitCancelFullScreen) {  
              document.webkitCancelFullScreen();  
            }  
          }  
        }



